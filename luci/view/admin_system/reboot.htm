<%#
LuCI - Lua Configuration Interface
Copyright 2008 Steven Barth <steven@midlink.org>
Copyright 2008 Jo-Philipp Wich <xm@leipzig.freifunk.net>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

	http://www.apache.org/licenses/LICENSE-2.0

$Id: reboot.htm 5448 2009-10-31 15:54:11Z jow $

-%>
<%+header%>
<fieldset class="cbi-section">
<h2  style="text-indent:0em" ><a id="content" name="content"><font color= "#ffffff"><%:System%></font></a></h2>
<div></div>&nbsp;<div></div>
<p style="text-indent:4em;font-size:16px;" ><%:Reboots the operating system of your device%></p>
<div></div>&nbsp;<div></div>
<%-
local c = require("luci.model.uci").cursor():changes()
if c and next(c) then
-%>
	<p class="warning" style="text-indent:4em;font-size:16px;"><font color= "#FF0000"><%:Warning: There are unsaved changes that will be lost while rebooting!%></font></p> 
<%-
end
if not reboot then 
-%>
<p style="text-indent:40em"><button  onclick="location.href='<%=controller%>/admin/system/reboot?reboot=1'" style="width:100px; height:30px;"><%:Perform reboot%></button></p>
<%- else -%>
<p style="text-indent:4em"><%:Please wait: Device rebooting...%></p>
<script type="text/javascript">setTimeout("window.top.location='<%=controller%>/admin'", 60000)</script>
<%- end -%>
</fieldset>
<%+footer%>